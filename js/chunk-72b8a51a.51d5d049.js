(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72b8a51a"],{"076d":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"model-container"},[0===e.widgetConfig.formItems.length?i("div",{staticClass:"form-empty"},[e._v(" 从左侧拖拽来添加表单项 ")]):e._e(),i("el-form",{ref:"iForm",attrs:{model:e.modelValue,columns:e.widgetConfig.formConfig.columns,"label-position":e.widgetConfig.formConfig.labelPosition,"label-width":e.widgetConfig.formConfig.labelWidth+"px",size:e.widgetConfig.formConfig.size}},[i("draggable",{attrs:{group:"form",ghostClass:"ghost",animation:"200",handle:".drag-widget"},on:{start:function(t){e.drag=!0},end:e.handleWidgetEnd,add:e.handleWidgetAdd},model:{value:e.widgetConfig.formItems,callback:function(t){e.$set(e.widgetConfig,"formItems",t)},expression:"widgetConfig.formItems"}},e._l(e.widgetConfig.formItems,(function(t,o){return i("el-form-item",{key:o,staticClass:"widget-view",class:e.formItemClass(t.renderConfig.columns||e.widgetConfig.formConfig.columns),attrs:{prop:t.prop||t.key,"label-width":t.renderConfig.labelWidth?t.renderConfig.labelWidth+"px":void 0,columns:t.renderConfig.columns||e.widgetConfig.formConfig.columns},nativeOn:{click:function(t){return t.stopPropagation(),e.handleSelectWidget(o)}}},[i("template",{slot:"label"},[e._v(" "+e._s(t.label)+" "),t.renderConfig.labelTips?i("el-tooltip",{attrs:{placement:t.renderConfig.labelTips.placement||"top",effect:t.renderConfig.labelTips.effect}},[i("i",{staticClass:"el-icon-question"}),i("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(t.renderConfig.labelTips.content||t.renderConfig.labelTips)},slot:"content"})]):e._e()],1),i("form-element",{attrs:{renderConfig:t.renderConfig,type:t.type},model:{value:e.modelValue[t.prop||t.key],callback:function(i){e.$set(e.modelValue,t.prop||t.key,i)},expression:"modelValue[item.prop || item.key]"}}),e.selectWidget._uniqueKey==t._uniqueKey?i("div",{staticClass:"widget-view-action"},[i("svg-icon",{staticClass:"icon-trash",attrs:{"icon-class":"delete"},on:{click:function(t){return t.stopPropagation(),e.handleWidgetDelete(o)}}})],1):e._e(),e.selectWidget._uniqueKey==t._uniqueKey?i("div",{staticClass:"widget-view-drag"},[i("svg-icon",{staticClass:"icon-drag drag-widget",attrs:{"icon-class":"move"}})],1):e._e()],2)})),1)],1),i("el-dialog",{attrs:{title:"表单预览",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("i-form",{attrs:{model:e.previewModel,formItems:e.previewFormItems,formAttrs:e.widgetConfig.formConfig}}),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormDataVisible=!0}}},[e._v("获取数据")]),i("el-button",{attrs:{type:"primary"},on:{click:e.formConfirm}},[e._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"表单数据",visible:e.dialogFormDataVisible},on:{"update:visible":function(t){e.dialogFormDataVisible=t}}},[i("pre",{staticStyle:{"overflow-y":"auto"}},[e._v(e._s(JSON.stringify(e.previewModel,null,4)))]),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormDataVisible=!1}}},[e._v("确 定")])],1)]),i("el-dialog",{attrs:{title:"JSON预览",visible:e.dialogJSONVisible},on:{"update:visible":function(t){e.dialogJSONVisible=t}}},[i("pre",{staticStyle:{height:"400px","overflow-y":"auto"}},[e._v(e._s(JSON.stringify(e.widgetConfig,null,4)))]),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogJSONVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogJSONVisible=!1}}},[e._v("确 定")])],1)]),i("el-dialog",{attrs:{title:"代码预览",visible:e.dialogCodeVisible},on:{"update:visible":function(t){e.dialogCodeVisible=t}}},[i("pre",{staticStyle:{height:"400px","overflow-y":"auto"}},[e._v(e._s(e.componentCode))]),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogCodeVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogCodeVisible=!1}}},[e._v("确 定")])],1)])],1)},n=[],r=(i("4160"),i("fb6a"),i("a9e3"),i("d3b7"),i("159b"),i("5530")),l=i("310e"),s=i.n(l),a=(i("99af"),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"vue",i=e.model,o=e.formItems,n=e.formAttrs;if("vue"==t)return'<template>\n  <div>\n    <i-form :model="model" :formItems="formItems" :formAttrs="formItems"></i-form>\n    </i-form>\n    <el-button type="primary" @click="handleSubmit">提交</el-button>\n  </div>\n</template>\n\n<script>\n  export default {\n    data () {\n      return {\n        model: '.concat(i,",\n        formItems: ").concat(o,",\n        formAttrs: ").concat(n,"\n      }\n    },\n    methods: {\n      handleSubmit () {\n        console.log(this.model)\n      }\n    }\n  }\n<\/script>")}),d={name:"formWidget",components:{Draggable:s.a,FormElement:function(){return Promise.resolve().then(i.bind(null,"bf25"))}},props:{widgetConfig:{type:Object},activeItemIndex:{type:Number,default:0}},data:function(){return{drag:!1,dialogFormVisible:!1,dialogJSONVisible:!1,dialogFormDataVisible:!1,dialogCodeVisible:!1,previewModel:null,previewFormItems:[],componentCode:""}},computed:{modelValue:{get:function(){var e={};return this.widgetConfig.formItems.length>0&&this.widgetConfig.formItems.forEach((function(t){t.renderConfig&&void 0!==t.renderConfig.defaultValue?e[t.prop||t.key]=t.renderConfig&&t.renderConfig.defaultValue:e[t.prop||t.key]=""})),e},set:function(e){console.log("set: "+e)}},selectWidget:function(){return this.widgetConfig.formItems[this.activeItemIndex]}},methods:{formItemClass:function(e){var t={1:"single",2:"two",3:"three",4:"four"};return t[e]||"single"},updateActiveIndex:function(e){this.$emit("setActiveIndex",e)},getPropByType:function(e,t){return e+"_"+t},handleWidgetAdd:function(e){var t=e.newIndex;this.updateActiveIndex(t);var i=Date.parse(new Date)+"_"+Math.ceil(99999*Math.random()),o=this.widgetConfig.formItems[t].type,n=this.getPropByType(o,i);this.$set(this.widgetConfig.formItems,t,Object(r["a"])(Object(r["a"])({},this.widgetConfig.formItems[t]),{},{renderConfig:Object(r["a"])({},this.widgetConfig.formItems[t].renderConfig),_uniqueKey:i,prop:n,rules:[]}))},handleWidgetEnd:function(e){this.updateActiveIndex(e.newIndex)},formConfirm:function(){this.dialogFormVisible=!1},viewForm:function(){this.previewModel=JSON.parse(JSON.stringify(this.modelValue)),this.previewFormItems=this.widgetConfig.formItems.slice(),this.dialogFormVisible=!0},viewJSON:function(){this.dialogJSONVisible=!0},viewCode:function(){this.componentCode=a({model:JSON.stringify(this.modelValue),formItems:JSON.stringify(this.widgetConfig.formItems),formAttrs:JSON.stringify(this.widgetConfig.formConfig)}),this.dialogCodeVisible=!0},handleSelectWidget:function(e){this.updateActiveIndex(e)},handleWidgetDelete:function(e){this.$emit("deleteItemByIndex",e)},handleWidgetClone:function(e){console.log(e)}}},f=d,c=(i("2ac4"),i("2877")),g=Object(c["a"])(f,o,n,!1,null,"71db7bf3",null);t["default"]=g.exports},"2ac4":function(e,t,i){"use strict";var o=i("4075"),n=i.n(o);n.a},4075:function(e,t,i){},"99af":function(e,t,i){"use strict";var o=i("23e7"),n=i("d039"),r=i("e8b5"),l=i("861d"),s=i("7b0b"),a=i("50c4"),d=i("8418"),f=i("65f0"),c=i("1dde"),g=i("b622"),m=i("2d00"),u=g("isConcatSpreadable"),p=9007199254740991,v="Maximum allowed index exceeded",b=m>=51||!n((function(){var e=[];return e[u]=!1,e.concat()[0]!==e})),C=c("concat"),h=function(e){if(!l(e))return!1;var t=e[u];return void 0!==t?!!t:r(e)},w=!b||!C;o({target:"Array",proto:!0,forced:w},{concat:function(e){var t,i,o,n,r,l=s(this),c=f(l,0),g=0;for(t=-1,o=arguments.length;t<o;t++)if(r=-1===t?l:arguments[t],h(r)){if(n=a(r.length),g+n>p)throw TypeError(v);for(i=0;i<n;i++,g++)i in r&&d(c,g,r[i])}else{if(g>=p)throw TypeError(v);d(c,g++,r)}return c.length=g,c}})},fb6a:function(e,t,i){"use strict";var o=i("23e7"),n=i("861d"),r=i("e8b5"),l=i("23cb"),s=i("50c4"),a=i("fc6a"),d=i("8418"),f=i("b622"),c=i("1dde"),g=i("ae40"),m=c("slice"),u=g("slice",{ACCESSORS:!0,0:0,1:2}),p=f("species"),v=[].slice,b=Math.max;o({target:"Array",proto:!0,forced:!m||!u},{slice:function(e,t){var i,o,f,c=a(this),g=s(c.length),m=l(e,g),u=l(void 0===t?g:t,g);if(r(c)&&(i=c.constructor,"function"!=typeof i||i!==Array&&!r(i.prototype)?n(i)&&(i=i[p],null===i&&(i=void 0)):i=void 0,i===Array||void 0===i))return v.call(c,m,u);for(o=new(void 0===i?Array:i)(b(u-m,0)),f=0;m<u;m++,f++)m in c&&d(o,f,c[m]);return o.length=f,o}})}}]);
//# sourceMappingURL=chunk-72b8a51a.51d5d049.js.map